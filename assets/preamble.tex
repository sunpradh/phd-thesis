%======================================================================
% PREAMBLE
%======================================================================

%----------------------------------------
% DOCUMENT APPEARANCE
%----------------------------------------

% Fonts
%----------------------------------------
\usepackage{fontspec}
\usepackage{mlmodern}
\usepackage[T1]{fontenc}
\setsansfont{IBM Plex Sans}
\newfontfamily{\PlexMedium}{IBM Plex Sans Medm}


% Custom chapter heading style
%----------------------------------------
\makechapterstyle{mychapter}{
    \chapterstyle{companion}
    \setlength{\beforechapskip}{0cm}
    \setlength{\topskip}{0cm}
    \setlength{\midchapskip}{5pt}
    \renewcommand*{\chapnamefont}{}
    \renewcommand*{\printchaptername}{}
    \renewcommand*{\chapnumfont}{\sffamily\LARGE\bfseries}
    \renewcommand*{\printchapternum}{%
        \raggedleft\chapnumfont %
        \ifanappendix appendix~ \thechapter %
        \else chapter~ \numtoname{\thechapter}\fi%
    }
    \setlength{\chapindent}{0.75\marginparsep}
    \addtolength{\chapindent}{0.75\marginparwidth}
    \renewcommand*{\chaptitlefont}{\normalfont\sffamily\HUGE}
    \renewcommand{\printchaptertitle}[1]{%
        \begin{adjustwidth}{\chapindent}{-\chapindent}
            \raggedleft \chaptitlefont ##1\par\nobreak
        \end{adjustwidth}
    }
}


% Custom section style
%----------------------------------------
\setsecnumdepth{subsection}
\settocdepth{subsection}
\hangsecnum
\makeheadstyles{myheadings}{
    \renewcommand*{\secheadstyle}{\sffamily\Large\PlexMedium}
    \renewcommand*{\subsecheadstyle}{\sffamily\large\PlexMedium}
    \renewcommand*{\subsubsecheadstyle}{\sffamily\normalsize\PlexMedium}
}


% Custom page style
%----------------------------------------
\setlength{\headwidth}{\textwidth}
\addtolength{\headwidth}{0.75\marginparsep}
\addtolength{\headwidth}{0.75\marginparwidth}
\makepagestyle{mypagestyle}
\makerunningheadwidth{mypagestyle}{\headwidth}
\makeheadrule{mypagestyle}{\headwidth}{\normalrulethickness}
\makeheadposition{mypagestyle}{flushright}{flushleft}{}{}
\makepsmarks{mypagestyle}{%
    \nouppercaseheads
    \createmark{chapter}{both}{nonumber}{}{}
    \createmark{section}{right}{nonumber}{}{}
    \createplainmark{toc}{both}{\contentsname}
    \createplainmark{lof}{both}{\listfigurename}
    \createplainmark{lot}{both}{\listtablename}
    \createplainmark{bib}{both}{\bibname}
    \createplainmark{index}{both}{\indexname}
    \createplainmark{glossary}{both}{\glossaryname}
}

% Headers
\makeevenhead{mypagestyle}{\normalfont\sffamily\PlexMedium\rightmark}{}{}
\makeoddhead{mypagestyle}{}{}{\normalfont\PlexMedium\leftmark}

% Footers
\makeevenfoot{mypagestyle}{}{\normalfont\PlexMedium\thepage}{}
\makeoddfoot{mypagestyle}{}{\normalfont\PlexMedium\thepage}{}
\addtolength{\footskip}{20pt}

% Fix chapter page style
\copypagestyle{chapter}{plain}
\makeevenfoot{chapter}{}{\normalfont\PlexMedium\thepage}{}
\makeoddfoot{chapter}{}{\normalfont\PlexMedium\thepage}{}


% Set all the custom styles
\headstyles{myheadings}
\chapterstyle{mychapter}
\pagestyle{mypagestyle}

% Line spacing
\linespread{1.1}

%----------------------------------------
% MATH
%----------------------------------------
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{physics}
\usepackage{bm}
\usepackage{slashed}

% Show equation labels
\usepackage[]{showlabels}
\renewcommand{\showlabelfont}{\scriptsize\sffamily\color{gray}}

% Math macros
\newcommand{\R}{\mathbb{R}} % Real field
\newcommand{\Z}{\mathbb{Z}} % integers
\newcommand{\C}{\mathbb{C}} % Complex field
\newcommand{\phys}{\text{phys}} % 'physical' label
\newcommand{\W}{W_{\square}} % single plaquette Wilson loop
\newcommand{\action}{\mathcal{S}} % action
\newcommand{\HamilKS}{H_{\text{KS}}} % action
\newcommand{\link}{\ell} % action
\newcommand{\HilbertSpace}{\mathcal{H}}
\newcommand{\U}{\mathrm{U}} % unitary group
\newcommand{\SU}{\mathrm{SU}} % special unitary group

\renewcommand{\dd}{\text{d}}


%----------------------------------------
% GRAPHICS
%----------------------------------------
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{tikz}


%----------------------------------------
% MISC
%----------------------------------------
\usepackage[colorlinks, linkcolor=blue]{hyperref}

% Title and author
\title{Finite Group Lattice Gauge Theories for Quantum Simulation}
\author{Sunny Pradhan}
\date{}

% macro for TODO notes
\newcommand{\todo}[1]{\textcolor{red}{[ \textsf{#1} ]}}
% macro for missing citations
\newcommand{\citneeded}{\textcolor{red}{\textsf{\textsuperscript{[citation?]}}}}
